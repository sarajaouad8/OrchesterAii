<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview - OrchestrAi</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
        },
      },
    }
  </script>

  <style>
    :root {
      --bg: #f4f0fb;
      --bg-sidebar: #ffffff;
      --bg-card: #ffffff;
      --bg-card-alt: #faf8ff;
      --fg: #1a1225;
      --fg-secondary: #6b5f7d;
      --fg-muted: #9b91ab;
      --border: #ebe5f5;
      --primary: #7c3aed;
      --primary-light: #ede9fe;
      --primary-hover: #6d28d9;
      --success: #10b981;
      --success-light: #d1fae5;
      --warning: #f59e0b;
      --warning-light: #fef3c7;
      --danger: #ef4444;
      --danger-light: #fee2e2;
      --info: #3b82f6;
      --info-light: #dbeafe;
      --shadow-card: 0 1px 3px rgba(124,58,237,0.04), 0 4px 16px rgba(124,58,237,0.03);
      --shadow-card-hover: 0 4px 24px rgba(124,58,237,0.08);
    }

    .dark {
      --bg: #0c0a12;
      --bg-sidebar: #13111a;
      --bg-card: #1a1726;
      --bg-card-alt: #1f1b2e;
      --fg: #eee8f6;
      --fg-secondary: #a89bc0;
      --fg-muted: #6b5f7d;
      --border: #2a2438;
      --primary: #a78bfa;
      --primary-light: rgba(167,139,250,0.12);
      --primary-hover: #8b5cf6;
      --success: #34d399;
      --success-light: rgba(52,211,153,0.12);
      --warning: #fbbf24;
      --warning-light: rgba(251,191,36,0.12);
      --danger: #f87171;
      --danger-light: rgba(248,113,113,0.12);
      --info: #60a5fa;
      --info-light: rgba(96,165,250,0.12);
      --shadow-card: 0 1px 3px rgba(0,0,0,0.2), 0 4px 16px rgba(0,0,0,0.15);
      --shadow-card-hover: 0 4px 24px rgba(124,58,237,0.15);
    }

    body { background: var(--bg); color: var(--fg); font-family: 'Inter', system-ui, sans-serif; }

    .glass-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: var(--shadow-card);
      transition: all 0.3s ease;
    }
    .glass-card:hover { box-shadow: var(--shadow-card-hover); transform: translateY(-2px); }

    .sidebar { background: var(--bg-sidebar); border-right: 1px solid var(--border); }
    .sidebar-link {
      display: flex; align-items: center; gap: 12px; padding: 10px 16px;
      border-radius: 10px; font-size: 13px; font-weight: 500;
      color: var(--fg-secondary); transition: all 0.15s ease;
    }
    .sidebar-link:hover { background: var(--primary-light); color: var(--primary); }
    .sidebar-link.active { background: var(--primary-light); color: var(--primary); font-weight: 600; }

    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--fg-muted); border-radius: 8px; }

    .badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 12px; border-radius: 100px; font-size: 11px; font-weight: 600; }

    .btn-primary {
      background: var(--primary); color: #fff; border: none; border-radius: 12px;
      font-size: 13px; font-weight: 600; padding: 12px 20px; cursor: pointer;
      transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary:hover { background: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(124,58,237,0.3); }

    .quick-action {
      display: flex; align-items: center; gap: 16px; padding: 16px;
      border-radius: 16px; border: 1px solid var(--border); background: var(--bg-card);
      transition: all 0.2s; cursor: pointer; text-decoration: none;
    }
    .quick-action:hover { background: var(--primary-light); border-color: var(--primary); transform: translateX(4px); }

    .stat-card { position: relative; overflow: hidden; }
    .stat-card::before {
      content: ''; position: absolute; top: -50%; right: -50%;
      width: 100%; height: 100%; border-radius: 50%;
      background: radial-gradient(circle, var(--primary-light) 0%, transparent 70%);
      opacity: 0.5;
    }

    .progress-ring { transform: rotate(-90deg); }
    .progress-ring-circle {
      transition: stroke-dashoffset 0.5s ease;
      stroke-linecap: round;
    }

    .activity-item { position: relative; padding-left: 24px; }
    .activity-item::before {
      content: ''; position: absolute; left: 6px; top: 24px; bottom: -16px;
      width: 2px; background: var(--border);
    }
    .activity-item:last-child::before { display: none; }
    .activity-dot {
      position: absolute; left: 0; top: 6px; width: 14px; height: 14px;
      border-radius: 50%; border: 3px solid var(--bg-card);
    }

    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse { animation: pulse 2s infinite; }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .animate-float { animation: float 3s ease-in-out infinite; }
  </style>

  <script>
    (function () {
      try {
        var t = localStorage.getItem('theme');
        if (t === 'dark' || (!t && matchMedia('(prefers-color-scheme:dark)').matches))
          document.documentElement.classList.add('dark');
      } catch (e) {}
    })();
  </script>
</head>

<body class="antialiased">
  <div class="flex h-screen overflow-hidden">

    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <aside class="sidebar hidden lg:flex w-[260px] flex-col flex-shrink-0">
      <div class="flex items-center gap-3 px-6 py-6">
        <div class="flex h-10 w-10 items-center justify-center rounded-xl" style="background: var(--primary);">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
        </div>
        <div>
          <div class="text-[15px] font-bold" style="color: var(--fg);">OrchestrAi</div>
          <div class="text-[11px] font-medium" style="color: var(--fg-muted);">Manager Portal</div>
        </div>
      </div>

      <nav class="flex-1 px-4 space-y-1 mt-2 overflow-y-auto">
        <div class="text-[10px] font-bold uppercase tracking-widest px-3 mb-2" style="color: var(--fg-muted);">Main</div>
        <a class="sidebar-link active" href="{{ url_for('manager.dashboard') }}">
          <svg class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          Overview
        </a>
        <a class="sidebar-link" href="{{ url_for('manager.projects') }}">
          <svg class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          Projects
        </a>
        <a class="sidebar-link" href="{{ url_for('manager.employees') }}">
          <svg class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          Employees
        </a>

        <div class="text-[10px] font-bold uppercase tracking-widest px-3 mb-2 mt-6" style="color: var(--fg-muted);">Settings</div>
        <a class="sidebar-link" href="#">
          <svg class="w-[18px] h-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          Settings
        </a>
      </nav>

      <div class="p-4">
        <div class="rounded-2xl p-4" style="background: linear-gradient(135deg, var(--primary), var(--primary-hover));">
          <div class="flex items-center gap-2 mb-2">
            <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            <span class="text-xs font-bold text-white">Pro Tip</span>
          </div>
          <p class="text-[11px] leading-relaxed text-white/80">Use Quick Actions to speed up your workflow!</p>
        </div>
      </div>
    </aside>

    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="flex-1 flex flex-col overflow-hidden">

      <!-- Top Bar -->
      <header class="flex items-center justify-between px-6 lg:px-8 h-[72px] flex-shrink-0" style="border-bottom: 1px solid var(--border); background: var(--bg-sidebar);">
        <div>
          <div class="flex items-center gap-2">
            <h1 class="text-[18px] font-bold" style="color: var(--fg);">Good {{ 'morning' if now.hour < 12 else ('afternoon' if now.hour < 18 else 'evening') }}, {{ session.get('username', 'Manager') }}!</h1>
            <span class="animate-float text-2xl">ðŸ‘‹</span>
          </div>
          <p class="text-[12px] mt-0.5" style="color: var(--fg-muted);">{{ now.strftime('%A, %B %d, %Y') }}</p>
        </div>
        <div class="flex items-center gap-3">
          <button onclick="toggleTheme()" class="w-10 h-10 rounded-xl flex items-center justify-center transition-all" style="border: 1px solid var(--border); color: var(--fg-secondary);" onmouseover="this.style.background='var(--primary-light)'" onmouseout="this.style.background='transparent'">
            <svg id="sunIcon" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
            <svg id="moonIcon" class="w-5 h-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button>
          <div class="flex items-center gap-3 pl-3" style="border-left: 1px solid var(--border);">
            <div class="w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold text-white" style="background: linear-gradient(135deg, var(--primary), var(--primary-hover));">
              {{ session.get('username', 'M')[0].upper() }}
            </div>
            <div class="hidden sm:block">
              <div class="text-[13px] font-semibold" style="color: var(--fg);">{{ session.get('username', 'Manager') }}</div>
              <div class="text-[11px]" style="color: var(--fg-muted);">Manager</div>
            </div>
          </div>
          <a href="{{ url_for('auth.logout') }}" class="w-10 h-10 rounded-xl flex items-center justify-center transition-all" style="border: 1px solid var(--border); color: var(--fg-secondary);" onmouseover="this.style.background='var(--danger-light)';this.style.color='var(--danger)'" onmouseout="this.style.background='transparent';this.style.color='var(--fg-secondary)'" title="Logout">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
          </a>
        </div>
      </header>

      <!-- Scrollable Content -->
      <main class="flex-1 overflow-y-auto p-6 lg:p-8">

        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="mb-5 rounded-xl px-4 py-3 text-[13px] font-medium flex items-center gap-2"
                style="{% if category == 'error' %}background: var(--danger-light); color: var(--danger);{% elif category == 'success' %}background: var(--success-light); color: var(--success);{% else %}background: var(--primary-light); color: var(--primary);{% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- â”€â”€â”€ HERO WELCOME CARD â”€â”€â”€ -->
        <div class="glass-card p-6 mb-6 relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 opacity-10" style="background: radial-gradient(circle, var(--primary) 0%, transparent 70%);"></div>
          <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
            <div>
              <h2 class="text-xl font-bold mb-1" style="color: var(--fg);">Welcome to your Dashboard</h2>
              <p class="text-[13px]" style="color: var(--fg-muted);">Here's a quick overview of your workspace. Manage projects, employees, and track progress all in one place.</p>
            </div>
          
          </div>
        </div>

        <!-- â”€â”€â”€ STATS GRID â”€â”€â”€ -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
          <!-- Total Team -->
          <div class="glass-card stat-card p-5">
            <div class="relative z-10">
              <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 rounded-2xl flex items-center justify-center" style="background: linear-gradient(135deg, var(--primary-light), var(--primary-light));">
                  <svg class="w-6 h-6" style="color: var(--primary);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                </div>
                <span class="badge" style="background: var(--success-light); color: var(--success);">
                  <span class="w-1.5 h-1.5 rounded-full animate-pulse" style="background: var(--success);"></span>
                  Live
                </span>
              </div>
              <div class="text-3xl font-extrabold mb-1" style="color: var(--fg);">{{ stats.total_employees + stats.total_managers }}</div>
              <div class="text-[12px] font-medium" style="color: var(--fg-muted);">Total Team Members</div>
              <div class="mt-3 flex items-center gap-2">
                <span class="text-[11px] px-2 py-0.5 rounded-full" style="background: var(--primary-light); color: var(--primary);">{{ stats.total_managers }} managers</span>
                <span class="text-[11px] px-2 py-0.5 rounded-full" style="background: var(--info-light); color: var(--info);">{{ stats.total_employees }} employees</span>
              </div>
            </div>
          </div>

          <!-- Active Projects -->
          <div class="glass-card stat-card p-5">
            <div class="relative z-10">
              <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 rounded-2xl flex items-center justify-center" style="background: var(--info-light);">
                  <svg class="w-6 h-6" style="color: var(--info);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                </div>
                <span class="badge" style="background: var(--info-light); color: var(--info);">Projects</span>
              </div>
              <div class="text-3xl font-extrabold mb-1" style="color: var(--fg);">{{ stats.total_projects }}</div>
              <div class="text-[12px] font-medium" style="color: var(--fg-muted);">Total Projects</div>
              <div class="mt-3 flex items-center gap-2">
                <span class="text-[11px] px-2 py-0.5 rounded-full" style="background: var(--warning-light); color: var(--warning);">{{ stats.pending_projects }} pending</span>
                <span class="text-[11px] px-2 py-0.5 rounded-full" style="background: var(--success-light); color: var(--success);">{{ stats.in_progress_projects }} active</span>
              </div>
            </div>
          </div>

          <!-- Completed -->
          <div class="glass-card stat-card p-5">
            <div class="relative z-10">
              <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 rounded-2xl flex items-center justify-center" style="background: var(--success-light);">
                  <svg class="w-6 h-6" style="color: var(--success);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                </div>
                <span class="badge" style="background: var(--success-light); color: var(--success);">Done</span>
              </div>
              <div class="text-3xl font-extrabold mb-1" style="color: var(--fg);">{{ stats.completed_projects }}</div>
              <div class="text-[12px] font-medium" style="color: var(--fg-muted);">Completed Projects</div>
              <div class="mt-3">
                <div class="w-full h-2 rounded-full" style="background: var(--border);">
                  <div class="h-full rounded-full transition-all" style="background: var(--success); width: {{ (stats.completed_projects / stats.total_projects * 100) if stats.total_projects > 0 else 0 }}%;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Success Rate -->
          <div class="glass-card stat-card p-5">
            <div class="relative z-10">
              <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 rounded-2xl flex items-center justify-center" style="background: var(--warning-light);">
                  <svg class="w-6 h-6" style="color: var(--warning);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4"/><path d="M12 18v4"/><path d="m4.93 4.93 2.83 2.83"/><path d="m16.24 16.24 2.83 2.83"/><path d="M2 12h4"/><path d="M18 12h4"/><path d="m4.93 19.07 2.83-2.83"/><path d="m16.24 7.76 2.83-2.83"/></svg>
                </div>
                <span class="badge" style="background: var(--warning-light); color: var(--warning);">Rate</span>
              </div>
              <div class="text-3xl font-extrabold mb-1" style="color: var(--fg);">{{ ((stats.completed_projects / stats.total_projects * 100) | round | int) if stats.total_projects > 0 else 0 }}%</div>
              <div class="text-[12px] font-medium" style="color: var(--fg-muted);">Completion Rate</div>
              <div class="mt-3 flex items-center gap-1">
                <svg class="w-4 h-4" style="color: var(--success);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                <span class="text-[11px] font-medium" style="color: var(--success);">Great progress!</span>
              </div>
            </div>
          </div>
        </div>

        <!-- â”€â”€â”€ MAIN CONTENT GRID â”€â”€â”€ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

          <!-- â•â• LEFT: Quick Actions + Recent Projects (2 cols) â•â• -->
          <div class="lg:col-span-2 space-y-6">

            <!-- Quick Actions -->
            <div class="glass-card p-6">
              <div class="flex items-center justify-between mb-5">
                <div>
                  <h3 class="text-[15px] font-bold" style="color: var(--fg);">Quick Actions</h3>
                  <p class="text-[12px]" style="color: var(--fg-muted);">Common tasks at your fingertips</p>
                </div>
                <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: var(--primary-light);">
                  <svg class="w-5 h-5" style="color: var(--primary);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                </div>
              </div>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                <a href="{{ url_for('manager.projects') }}" class="quick-action">
                  <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, var(--primary), var(--primary-hover));">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                  </div>
                  <div>
                    <div class="text-[13px] font-semibold" style="color: var(--fg);">Create Project</div>
                    <div class="text-[11px]" style="color: var(--fg-muted);">Start a new project with CV & specs</div>
                  </div>
                </a>
                <a href="{{ url_for('manager.employees') }}" class="quick-action">
                  <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, var(--success), #059669);">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg>
                  </div>
                  <div>
                    <div class="text-[13px] font-semibold" style="color: var(--fg);">Add Employee</div>
                    <div class="text-[11px]" style="color: var(--fg-muted);">Invite a new team member</div>
                  </div>
                </a>
                <a href="{{ url_for('manager.projects') }}" class="quick-action">
                  <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, var(--info), #2563eb);">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                  </div>
                  <div>
                    <div class="text-[13px] font-semibold" style="color: var(--fg);">View Projects</div>
                    <div class="text-[11px]" style="color: var(--fg-muted);">Browse all active projects</div>
                  </div>
                </a>
                <a href="{{ url_for('manager.employees') }}" class="quick-action">
                  <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, var(--warning), #d97706);">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                  </div>
                  <div>
                    <div class="text-[13px] font-semibold" style="color: var(--fg);">Manage Team</div>
                    <div class="text-[11px]" style="color: var(--fg-muted);">View and edit team members</div>
                  </div>
                </a>
              </div>
            </div>

            <!-- Recent Projects -->
            <div class="glass-card p-6">
              <div class="flex items-center justify-between mb-5">
                <div>
                  <h3 class="text-[15px] font-bold" style="color: var(--fg);">Recent Projects</h3>
                  <p class="text-[12px]" style="color: var(--fg-muted);">Latest project activity</p>
                </div>
                <a href="{{ url_for('manager.projects') }}" class="text-[12px] font-semibold" style="color: var(--primary);">View All â†’</a>
              </div>
              {% if recent_projects %}
                <div class="space-y-3">
                  {% for project in recent_projects %}
                    <div class="flex items-center gap-4 p-3 rounded-xl transition-colors" style="border: 1px solid var(--border);" onmouseover="this.style.background='var(--bg-card-alt)'" onmouseout="this.style.background='transparent'">
                      <div class="w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0" 
                        style="background: {% if project.status == 'completed' %}var(--success-light){% elif project.status == 'in_progress' %}var(--info-light){% else %}var(--warning-light){% endif %};">
                        <svg class="w-5 h-5" style="color: {% if project.status == 'completed' %}var(--success){% elif project.status == 'in_progress' %}var(--info){% else %}var(--warning){% endif %};" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                      </div>
                      <div class="flex-1 min-w-0">
                        <div class="text-[13px] font-semibold truncate" style="color: var(--fg);">{{ project.name }}</div>
                        <div class="text-[11px]" style="color: var(--fg-muted);">Created {{ project.created_at.strftime('%b %d, %Y') if project.created_at else 'Recently' }}</div>
                      </div>
                      <span class="badge" style="background: {% if project.status == 'completed' %}var(--success-light); color: var(--success){% elif project.status == 'in_progress' %}var(--info-light); color: var(--info){% else %}var(--warning-light); color: var(--warning){% endif %};">
                        {{ project.status | replace('_', ' ') | title }}
                      </span>
                    </div>
                  {% endfor %}
                </div>
              {% else %}
                <div class="text-center py-10">
                  <div class="w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center" style="background: var(--primary-light);">
                    <svg class="w-8 h-8" style="color: var(--primary);" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/><line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/></svg>
                  </div>
                  <p class="text-[14px] font-semibold" style="color: var(--fg);">No projects yet</p>
                  <p class="text-[12px] mt-1 mb-4" style="color: var(--fg-muted);">Create your first project to get started</p>
                  <a href="{{ url_for('manager.projects') }}" class="btn-primary inline-flex">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    Create Project
                  </a>
                </div>
              {% endif %}
            </div>
          </div>

          <!-- â•â• RIGHT: Activity + Team Overview â•â• -->
          <div class="space-y-6">

            <!-- Project Status Chart -->
            <div class="glass-card p-6">
              <h3 class="text-[15px] font-bold mb-5" style="color: var(--fg);">Project Status</h3>
              <div class="flex items-center justify-center mb-5">
                <div class="relative">
                  <svg class="progress-ring w-32 h-32" viewBox="0 0 120 120">
                    <circle cx="60" cy="60" r="50" fill="none" stroke="var(--border)" stroke-width="10"/>
                    <circle class="progress-ring-circle" cx="60" cy="60" r="50" fill="none" stroke="var(--success)" stroke-width="10"
                      stroke-dasharray="{{ 314 }}" stroke-dashoffset="{{ 314 - (314 * (stats.completed_projects / stats.total_projects)) if stats.total_projects > 0 else 314 }}"/>
                  </svg>
                  <div class="absolute inset-0 flex items-center justify-center flex-col">
                    <span class="text-2xl font-bold" style="color: var(--fg);">{{ stats.total_projects }}</span>
                    <span class="text-[10px]" style="color: var(--fg-muted);">Total</span>
                  </div>
                </div>
              </div>
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <span class="w-3 h-3 rounded-full" style="background: var(--warning);"></span>
                    <span class="text-[12px]" style="color: var(--fg-secondary);">Pending</span>
                  </div>
                  <span class="text-[12px] font-semibold" style="color: var(--fg);">{{ stats.pending_projects }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <span class="w-3 h-3 rounded-full" style="background: var(--info);"></span>
                    <span class="text-[12px]" style="color: var(--fg-secondary);">In Progress</span>
                  </div>
                  <span class="text-[12px] font-semibold" style="color: var(--fg);">{{ stats.in_progress_projects }}</span>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <span class="w-3 h-3 rounded-full" style="background: var(--success);"></span>
                    <span class="text-[12px]" style="color: var(--fg-secondary);">Completed</span>
                  </div>
                  <span class="text-[12px] font-semibold" style="color: var(--fg);">{{ stats.completed_projects }}</span>
                </div>
              </div>
            </div>

            <!-- Team Overview -->
            <div class="glass-card p-6">
              <div class="flex items-center justify-between mb-5">
                <h3 class="text-[15px] font-bold" style="color: var(--fg);">Team Overview</h3>
                <a href="{{ url_for('manager.employees') }}" class="text-[12px] font-semibold" style="color: var(--primary);">View All</a>
              </div>
              {% if recent_employees %}
                <div class="space-y-3">
                  {% for emp in recent_employees %}
                    <div class="flex items-center gap-3 p-2 rounded-lg" style="border: 1px solid var(--border);">
                      <div class="w-9 h-9 rounded-full flex items-center justify-center text-[11px] font-bold text-white flex-shrink-0" style="background: linear-gradient(135deg, var(--primary), var(--primary-hover));">
                        {{ emp.username[0].upper() }}
                      </div>
                      <div class="flex-1 min-w-0">
                        <div class="text-[12px] font-semibold truncate" style="color: var(--fg);">{{ emp.username }}</div>
                        <div class="text-[10px]" style="color: var(--fg-muted);">{{ emp.role | title }}</div>
                      </div>
                      <span class="w-2 h-2 rounded-full animate-pulse" style="background: var(--success);"></span>
                    </div>
                  {% endfor %}
                </div>
              {% else %}
                <div class="text-center py-6">
                  <p class="text-[12px]" style="color: var(--fg-muted);">No team members yet</p>
                </div>
              {% endif %}
            </div>

          

  <script>
    function updateThemeIcons() {
      var d = document.documentElement.classList.contains('dark');
      document.getElementById('sunIcon').style.display = d ? 'none' : 'block';
      document.getElementById('moonIcon').style.display = d ? 'block' : 'none';
    }
    updateThemeIcons();

    function toggleTheme() {
      var d = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', d ? 'dark' : 'light');
      updateThemeIcons();
    }
  </script>
</body>
</html>
